{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","ShopHeader","_ref","numItems","total","react_default","a","createElement","className","Link","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","components_book_list_item","BookListContainer","this","_this$props","loading","components_spinner","components_error_indicator","book_list_BookList","Component","connect","_ref2","_ref2$bookList","bookList","_ref3","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","item","idx","count","HomePage","components_book_list","shopping_cart_table_shopping_cart_table","CartPage","App","role","components_shop_header","Switch","Route","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","es","error_boundry","value","BrowserRouter","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.8d36bc42.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n\nimport reducer from './reducers';\n\n\nconst logMiddleware = ({ getState }) => (next) => (action) => {\n  console.log(action.type, getState());\n  return next(action);\n};\n\nconst stringMiddleware = () => (next) => (action) => {\n  if (typeof action === 'string') {\n    return next({\n      type: action\n    });\n  }\n\n  return next(action);\n};\n\nconst store = createStore(reducer, applyMiddleware(\n  thunkMiddleware, stringMiddleware, logMiddleware));\n\n\nconst delayedActionCreator = (timeout) => (dispatch) => {\n  setTimeout(() => dispatch({\n    type: 'DELAYED_ACTION'\n  }), timeout);\n};\n\nstore.dispatch(delayedActionCreator(3000));\n\nexport default store;\n","import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from 'react';\nimport './shop-header.css';\nimport { Link } from 'react-router-dom';\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to=\"/\">\n        <div className=\"logo text-dark\">Book Store</div>\n      </Link>\n      <Link to=\"/cart\">\n        <div className=\"shopping-cart\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItems} items (${total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nexport default ShopHeader;\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button\n          onClick={onAddedToCart}\n          className=\"btn btn-primary add-to-cart\">\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (<Wrapped {...props}\n                     bookstoreService={bookstoreService}/>);\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n};\n\nexport default withBookstoreService;\n","\nconst booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  };\n};\n\nconst booksLoaded = (newBooks) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  };\n};\n\nconst booksError = (error) => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  };\n};\n\nexport const bookAddedToCart = (bookId) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  };\n};\n\nexport const bookRemovedFromCart = (bookId) => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nexport const allBooksRemovedFromCart = (bookId) => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nexport {\n  fetchBooks\n};\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from 'react';\nimport BookListItem from '../book-list-item';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\n\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\n\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"book-list\">\n      {\n        books.map((book) => {\n          return (\n            <li key={book.id}>\n              <BookListItem\n                book={book}\n                onAddedToCart={() => onAddedToCart(book.id)}/>\n            </li>\n          );\n        })\n      }\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    return <BookList books={books} onAddedToCart={onAddedToCart}/>;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n\n  return bindActionCreators({\n    fetchBooks: fetchBooks(bookstoreService),\n    onAddedToCart: bookAddedToCart\n  }, dispatch);\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart } from '../../actions';\n\nimport './shopping-cart-table.css';\n\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\">\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\">\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\">\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>\n        { items.map(renderRow) }\n        </tbody>\n      </table>\n\n      <div className=\"total\">\n        Total: ${total}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBooksRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import React from 'react';\nimport BookList from '../book-list';\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return <div>Cart Page</div>\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ShopHeader from '../shop-header';\nimport { HomePage, CartPage } from '../pages';\n\nimport './app.css';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItems={5} total={210}/>\n      <Switch>\n        <Route\n          path=\"/\"\n          component={HomePage}\n          exact />\n\n        <Route\n          path=\"/cart\"\n          component={CartPage}\n          />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","\nexport default class BookstoreService {\n\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'},\n    {\n      id: 3,\n      title: 'Get Programming with Node.js',\n      author: 'Jonathan Wexler',\n      price: 32,\n      coverImage: 'https://m.media-amazon.com/images/I/810taCAYmtL._AC_UL436_.jpg'},\n    {\n      id: 4,\n      title: 'Programming TypeScript: Making Your JavaScript Applications Scale',\n      author: 'Boris Cherny',\n      price: 29,\n      coverImage: 'https://m.media-amazon.com/images/I/914Lo09RDcL._AC_UL436_.jpg'},\n    {\n      id: 5,\n      title: 'React Cookbook: Create dynamic web apps with React using Redux, Webpack, Node.js, and GraphQL',\n      author: 'Carlos Santana Roldan',\n      price: 23,\n      coverImage: 'https://m.media-amazon.com/images/I/71yJ29SypNL._AC_UL436_.jpg'},\n    {\n      id: 6,\n      title: 'HTML and CSS: Design and Build Websites',\n      author: 'Jon Duckett',\n      price: 28,\n      coverImage: 'https://m.media-amazon.com/images/I/41p7u2kJACL._AC_UL436_.jpg'},\n    {\n      id: 7,\n      title: 'Learning React: Functional Web Development with React and Redux',\n      author: 'Alex Banks',\n      price: 30,\n      coverImage: 'https://m.media-amazon.com/images/I/7169mYAhsmL._AC_UL436_.jpg'},\n    {\n      id: 8,\n      title: 'React Explained: Your Step-by-Step Guide to React',\n      author: 'Zac Gordon',\n      price: 25,\n      coverImage: 'https://m.media-amazon.com/images/I/41KjE6umxmL._AC_UL436_.jpg'},\n    {\n      id: 9,\n      title: 'Pro JavaScript Design Patterns: The Essentials of Object-Oriented JavaScript Programming',\n      author: 'Dustin Diaz and Ross Harmes',\n      price: 35,\n      coverImage: 'https://m.media-amazon.com/images/I/81SjtUmw7aL._AC_UL436_.jpg'}\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.75) {\n          reject(new Error('Something bad happened'));\n        } else {\n          resolve(this.data);\n        }\n      }, 700);\n    });\n  }\n}","const updateBookList = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","const updateCartItems = (cartItems, item, idx) => {\n\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1)\n    ];\n  }\n\n  if (idx === -1) {\n    return [\n      ...cartItems,\n      item\n    ];\n  }\n\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n\n  const {\n    id = book.id,\n    count = 0,\n    title = book.title,\n    total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity*book.price\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList: { books }, shoppingCart: { cartItems }} = state;\n\n  const book = books.find(({id}) => id === bookId);\n  const itemIndex = cartItems.findIndex(({id}) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    }\n  }\n\n  switch(action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from './book-list';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\nexport default reducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}