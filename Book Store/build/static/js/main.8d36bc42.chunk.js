(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(49)},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(21),i=a.n(c),l=a(8),u=a(52),s=a(53),m=a(54),d=(a(34),a(51)),p=function(e){var t=e.numItems,a=e.total;return o.a.createElement("header",{className:"shop-header row"},o.a.createElement(d.a,{to:"/"},o.a.createElement("div",{className:"logo text-dark"},"Book Store")),o.a.createElement(d.a,{to:"/cart"},o.a.createElement("div",{className:"shopping-cart"},o.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," items ($",a,")")))},f=a(6),E=a(7),h=a(13),g=a(10),b=a(14),v=(a(36),function(e){var t=e.book,a=e.onAddedToCart,n=t.title,r=t.author,c=t.price,i=t.coverImage;return o.a.createElement("div",{className:"book-list-item"},o.a.createElement("div",{className:"book-cover"},o.a.createElement("img",{src:i,alt:"cover"})),o.a.createElement("div",{className:"book-details"},o.a.createElement("span",{className:"book-title"},n),o.a.createElement("div",{className:"book-author"},r),o.a.createElement("div",{className:"book-price"},"$",c),o.a.createElement("button",{onClick:a,className:"btn btn-primary add-to-cart"},"Add to cart")))}),O=a(5),_=o.a.createContext(),C=_.Provider,k=_.Consumer,y=function(){return function(e){return function(t){return o.a.createElement(k,null,function(a){return o.a.createElement(e,Object.assign({},t,{bookstoreService:a}))})}}},j=function(e){return{type:"FETCH_BOOKS_SUCCESS",payload:e}},S=function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}},A=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},I=function(e){return function(){return function(t){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then(function(e){return t(j(e))}).catch(function(e){return t(S(e))})}}},R=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},T=(a(38),function(){return o.a.createElement("div",null,"loading...")}),L=(a(40),function(){return o.a.createElement("div",null,"Error!")}),N=(a(42),function(e){var t=e.books,a=e.onAddedToCart;return o.a.createElement("ul",{className:"book-list"},t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(v,{book:e,onAddedToCart:function(){return a(e.id)}}))}))}),D=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.loading,n=e.error,r=e.onAddedToCart;return a?o.a.createElement(T,null):n?o.a.createElement(L,null):o.a.createElement(N,{books:t,onAddedToCart:r})}}]),t}(r.Component),B=R(y(),Object(l.b)(function(e){var t=e.bookList;return{books:t.books,loading:t.loading,error:t.error}},function(e,t){var a=t.bookstoreService;return Object(O.b)({fetchBooks:I(a),onAddedToCart:A},e)}))(D),w=(a(44),{onIncrease:A,onDecrease:function(e){return{type:"BOOK_REMOVED_FROM_CART",payload:e}},onDelete:function(e){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:e}}}),F=Object(l.b)(function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}},w)(function(e){var t=e.items,a=e.total,n=e.onIncrease,r=e.onDecrease,c=e.onDelete;return o.a.createElement("div",{className:"shopping-cart-table"},o.a.createElement("h2",null,"Your Order"),o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Item"),o.a.createElement("th",null,"Count"),o.a.createElement("th",null,"Price"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,t.map(function(e,t){var a=e.id,i=e.title,l=e.count,u=e.total;return o.a.createElement("tr",{key:a},o.a.createElement("td",null,t+1),o.a.createElement("td",null,i),o.a.createElement("td",null,l),o.a.createElement("td",null,"$",u),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(){return c(a)},className:"btn btn-outline-danger btn-sm float-right"},o.a.createElement("i",{className:"fa fa-trash-o"})),o.a.createElement("button",{onClick:function(){return n(a)},className:"btn btn-outline-success btn-sm float-right"},o.a.createElement("i",{className:"fa fa-plus-circle"})),o.a.createElement("button",{onClick:function(){return r(a)},className:"btn btn-outline-warning btn-sm float-right"},o.a.createElement("i",{className:"fa fa-minus-circle"}))))}))),o.a.createElement("div",{className:"total"},"Total: $",a))}),M=function(){return o.a.createElement("div",null,o.a.createElement(B,null),o.a.createElement(F,null))},U=function(){return o.a.createElement("div",null,"Cart Page")},K=(a(46),function(){return o.a.createElement("main",{role:"main",className:"container"},o.a.createElement(p,{numItems:5,total:210}),o.a.createElement(s.a,null,o.a.createElement(m.a,{path:"/",component:M,exact:!0}),o.a.createElement(m.a,{path:"/cart",component:U})))}),x=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(L,null):this.props.children}}]),t}(r.Component),J=function(){function e(){Object(f.a)(this,e),this.data=[{id:1,title:"Production-Ready Microservices",author:"Susan J. Fowler",price:32,coverImage:"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg"},{id:2,title:"Release It!",author:"Michael T. Nygard",price:45,coverImage:"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg"},{id:3,title:"Get Programming with Node.js",author:"Jonathan Wexler",price:32,coverImage:"https://m.media-amazon.com/images/I/810taCAYmtL._AC_UL436_.jpg"},{id:4,title:"Programming TypeScript: Making Your JavaScript Applications Scale",author:"Boris Cherny",price:29,coverImage:"https://m.media-amazon.com/images/I/914Lo09RDcL._AC_UL436_.jpg"},{id:5,title:"React Cookbook: Create dynamic web apps with React using Redux, Webpack, Node.js, and GraphQL",author:"Carlos Santana Roldan",price:23,coverImage:"https://m.media-amazon.com/images/I/71yJ29SypNL._AC_UL436_.jpg"},{id:6,title:"HTML and CSS: Design and Build Websites",author:"Jon Duckett",price:28,coverImage:"https://m.media-amazon.com/images/I/41p7u2kJACL._AC_UL436_.jpg"},{id:7,title:"Learning React: Functional Web Development with React and Redux",author:"Alex Banks",price:30,coverImage:"https://m.media-amazon.com/images/I/7169mYAhsmL._AC_UL436_.jpg"},{id:8,title:"React Explained: Your Step-by-Step Guide to React",author:"Zac Gordon",price:25,coverImage:"https://m.media-amazon.com/images/I/41KjE6umxmL._AC_UL436_.jpg"},{id:9,title:"Pro JavaScript Design Patterns: The Essentials of Object-Oriented JavaScript Programming",author:"Dustin Diaz and Ross Harmes",price:35,coverImage:"https://m.media-amazon.com/images/I/81SjtUmw7aL._AC_UL436_.jpg"}]}return Object(E.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise(function(t,a){setTimeout(function(){Math.random()>.75?a(new Error("Something bad happened")):t(e.data)},700)})}}]),e}(),z=a(24),P=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"FETCH_BOOKS_REQUEST":return{books:[],loading:!0,error:null};case"FETCH_BOOKS_SUCCESS":return{books:t.payload,loading:!1,error:null};case"FETCH_BOOKS_FAILURE":return{books:[],loading:!1,error:t.payload};default:return e.bookList}},H=a(9),Y=function(e,t,a){return 0===t.count?[].concat(Object(H.a)(e.slice(0,a)),Object(H.a)(e.slice(a+1))):-1===a?[].concat(Object(H.a)(e),[t]):[].concat(Object(H.a)(e.slice(0,a)),[t],Object(H.a)(e.slice(a+1)))},V=function(e,t,a){var n=e.bookList.books,r=e.shoppingCart.cartItems,o=n.find(function(e){return e.id===t}),c=r.findIndex(function(e){return e.id===t}),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t.id,r=void 0===n?e.id:n,o=t.count,c=void 0===o?0:o,i=t.title,l=void 0===i?e.title:i,u=t.total;return{id:r,title:l,count:c+a,total:(void 0===u?0:u)+a*e.price}}(o,r[c],a);return{orderTotal:0,cartItems:Y(r,i,c)}},G=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return V(e,t.payload,1);case"BOOK_REMOVED_FROM_CART":return V(e,t.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var a=e.shoppingCart.cartItems.find(function(e){return e.id===t.payload});return V(e,t.payload,-a.count);default:return e.shoppingCart}},W=function(e,t){return{bookList:P(e,t),shoppingCart:G(e,t)}},$=Object(O.c)(W,Object(O.a)(z.a,function(){return function(e){return function(t){return e("string"===typeof t?{type:t}:t)}}},function(e){var t=e.getState;return function(e){return function(a){return console.log(a.type,t()),e(a)}}}));$.dispatch((n=3e3,function(e){setTimeout(function(){return e({type:"DELAYED_ACTION"})},n)}));var Q=$,X=new J;i.a.render(o.a.createElement(l.a,{store:Q},o.a.createElement(x,null,o.a.createElement(C,{value:X},o.a.createElement(u.a,null,o.a.createElement(K,null))))),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.8d36bc42.chunk.js.map